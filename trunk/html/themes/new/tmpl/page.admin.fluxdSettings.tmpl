<tmpl_include name="inc.head.tmpl">
<tmpl_include name="inc.titleBar.tmpl">
<div id="content">
	<tmpl_if name="message">
		<tmpl_var name="message">
	</tmpl_if>
	<script src="js/functions.js" type="text/javascript"></script>
	<script src="js/adminSettings.js" type="text/javascript"></script>
	<script src="js/fluxdSettings.js" type="text/javascript"></script>
	<a name="fluxd" id="fluxd"></a>
	<div id="upload">
		<div id="uploadLast"></div>
		<div id="uploadFirst">
			<form name="controlForm" action="admin.php?op=controlFluxd" method="post">
				<span class="upload">
					<span id="fluazuStart">
						<tmpl_if name="fluxdSupported" value="1">
							<tmpl_if name="fluxdRunning">
								<input type="Hidden" name="a" value="stop">
								<input type="Submit" value="Stop fluxd">
							<tmpl_else>
								<input type="Hidden" name="a" value="start">
								<input type="Submit" value="Start fluxd">
							</tmpl_if>
						<tmpl_else>
							<span id="newUser">fluxd not supported<span>
							<tmpl_if name="perlMissing">
								<br>
								Perl is missing or Path is incorrect, check <a href="admin.php?op=serverSettings">Server-Settings</a> Page
							</tmpl_if>
							<tmpl_if name="phpMissing">
								<br>
								PHP is missing or Path is incorrect, check <a href="admin.php?op=serverSettings">Server-Settings</a> Page
							</tmpl_if>
							<tmpl_if name="socketsMissing">
								<br>
								PHP does not have support for <em>sockets</em>
							</tmpl_if>
						</tmpl_if>
					</span>
				</span>
			</form>
		</div>
	</div>
	<div class="uploadClass"></div>
	<div id="uploadBottom"></div>
	<div id="uploadBottomEnd"></div>
	<form name="theForm" action="admin.php?op=updateFluxdSettings" method="post" onsubmit="return validateSettings('fluxd')">
		<div id="upload">
			<div id="uploadLast"></div>
			<div id="uploadFirst">
				<span class="upload">
					Core
				</span>
			</div>
		</div>
		<div class="uploadClass">
			<table id="settings">
				<tr>
					<td class="settingsTitle">
						Database-Mode
					</td>
					<td class="settingsSetting" rowspan="2">
						<select name="fluxd_dbmode">
							<option value="php"
							<tmpl_if name="fluxd_dbmode" value="php">
								selected
							</tmpl_if>
							>PHP + fluxcli.php</option>
							<option value="dbi"
							<tmpl_if name="fluxd_dbmode" value="dbi">
								selected
							</tmpl_if>
							>Perl + DBI/DBD</option>
						</select>
					</td>
				</tr>
				<tr>
					<td class="settingsText">
						Specify the Mode to get data from the Database.
					</td>
				</tr>
				<tr>
					<td class="settingsTitle">
						Loglevel
					</td>
					<td class="settingsSetting" rowspan="2">
						<input name="fluxd_loglevel" type="Text" maxlength="2" value="<tmpl_var name="fluxd_loglevel">" size="5">
					</td>
				</tr>
				<tr>
					<td class="settingsText">
						Specify the level of logging (default is 0).
					</td>
				</tr>
			</table>
		</div>
		<div id="uploadBottom"></div>
		<div id="uploadBottomEnd"></div>
		<div id="upload">
			<div id="uploadLast"></div>
			<div id="uploadFirst">
				<span class="upload">
					Qmgr
					<tmpl_if name="fluxd_Qmgr_state" value="0">
						<img height="10" src="themes/default/images/black.gif" title="Qmgr not loaded.">
					</tmpl_if>
					<tmpl_if name="fluxd_Qmgr_state" value="1">
						<img height="10" src="themes/default/images/green.gif" title="Qmgr loaded.">
					</tmpl_if>
					<tmpl_if name="fluxd_Qmgr_state" value="-1">
						<img height="10" src="themes/default/images/red.gif" title="Qmgr error.">
					</tmpl_if>
				</span>
			</div>
		</div>
		<div class="uploadClass">
			<table id="settings">
				<tr>
					<td class="settingsTitle">
						Qmgr enabled
					</td>
					<td class="settingsSetting" rowspan="2">
						<select name="fluxd_Qmgr_enabled">
							<option value="1"
							<tmpl_if name="fluxd_Qmgr_enabled" value="1">
								selected
							</tmpl_if>
							>True</option>
							<option value="0"
							<tmpl_if name="fluxd_Qmgr_enabled" value="0">
								selected
							</tmpl_if>
							>False</option>
						</select>
					</td>
				</tr>
				<tr>
					<td class="settingsText">
						Specify whether or not to load the Qmgr module.
					</td>
				</tr>
				<tr>
					<td class="settingsTitle">
						Limit Transfer Global
					</td>
					<td class="settingsSetting" rowspan="2">
						<input name="fluxd_Qmgr_maxTotalTransfers" type="Text" maxlength="5" value="<tmpl_var name="fluxd_Qmgr_maxTotalTransfers">" size="5">
					</td>
				</tr>
				<tr>
					<td class="settingsText">
						Specify the maximum number of transfers the server will allow to run at one time (admins may override this).
					</td>
				</tr>
				<tr>
					<td class="settingsTitle">
						Limit Transfer Per User
					</td>
					<td class="settingsSetting" rowspan="2">
						<input name="fluxd_Qmgr_maxUserTransfers" type="Text" maxlength="5" value="<tmpl_var name="fluxd_Qmgr_maxUserTransfers">" size="5">
					</td>
				</tr>
				<tr>
					<td class="settingsText">
						Specify the maximum number of transfers a single user may run at one time.
					</td>
				</tr>
				<tr>
					<td class="settingsTitle">
						Qmgr Interval
					</td>
					<td class="settingsSetting" rowspan="2">
						<input name="fluxd_Qmgr_interval" type="Text" maxlength="10" value="<tmpl_var name="fluxd_Qmgr_interval">" size="5">
					</td>
				</tr>
				<tr>
					<td class="settingsText">
						Interval in seconds to have run Qmgr.
					</td>
				</tr>
			</table>
		</div>
		<div id="uploadBottom"></div>
		<div id="uploadBottomEnd"></div>
		<div id="upload">
			<div id="uploadLast"></div>
			<div id="uploadFirst">
				<span class="upload">
					Watch
					<tmpl_if name="fluxd_Watch_state" value="0">
						<img height="10" src="themes/default/images/black.gif" title="Watch not loaded.">
					</tmpl_if>
					<tmpl_if name="fluxd_Watch_state" value="1">
						<img height="10" src="themes/default/images/green.gif" title="Watch loaded.">
					</tmpl_if>
					<tmpl_if name="fluxd_Watch_state" value="-1">
						<img height="10" src="themes/default/images/red.gif" title="Watch error.">
					</tmpl_if>
				</span>
			</div>
		</div>
		<div class="uploadClass">
			<table id="settings">
				<tr>
					<td class="settingsTitle">
						Watch enabled
					</td>
					<td class="settingsSetting" rowspan="2">
						<select name="fluxd_Watch_enabled">
							<option value="1"
							<tmpl_if name="fluxd_Watch_enabled" value="1">
								selected
							</tmpl_if>
							>True</option>
							<option value="0"
							<tmpl_if name="fluxd_Watch_enabled" value="0">
								selected
							</tmpl_if>
							>False</option>
						</select>
					</td>
				</tr>
				<tr>
					<td class="settingsText">
						Specify whether or not to load the Watch module.
					</td>
				</tr>
				<tr>
					<td class="settingsTitle">
						Watch Interval
					</td>
					<td class="settingsSetting" rowspan="2">
						<input name="fluxd_Watch_interval" type="Text" maxlength="10" value="<tmpl_var name="fluxd_Watch_interval">" size="5">
					</td>
				</tr>
				<tr>
					<td class="settingsText">
						Interval in seconds to have run Watch.
					</td>
				</tr>
				<tr>
					<td class="settingsTitle">
						Watch Jobs
					</td>
					<td class="settingsSetting" rowspan="2">
						<select name="watch_jobs" size="3">
							<tmpl_if name="fluxd_Watch_jobs_list">
								<tmpl_loop name="fluxd_Watch_jobs_list">
									<option value="<tmpl_var escape="html" name="user">:<tmpl_var escape="html" name="dir">"><tmpl_var escape="htmlkeepspaces" name="user">:<tmpl_var escape="htmlkeepspaces" name="dir"></option>
								</tmpl_loop>
							</tmpl_if>
						</select>
						<input type="button" name="remButton" value="remove" onclick="removeWatchEntry()">
					</td>
				</tr>
				<tr>
					<td class="settingsText">
						Configure the Watch-Jobs.
					</td>
				</tr>
				<tr>
					<td class="settingsTitle">
						New Job
					</td>
					<td class="settingsSetting">
						<br />
						User:
						<select name="watch_user">
							<tmpl_loop name="watch_user">
								<option value="<tmpl_var name="user">"><tmpl_var name="user"></option>
							</tmpl_loop>
						</select>
						<input type="button" name="addButton" value="add" onclick="addWatchEntry()" size="30">
						<br /><br />
						Dir:
						<input type="text" name="watch_dir" size="20">
						Check/Create dirs <input type="checkbox" name="checkdir" value="true" checked>
					</td>
					<input type="hidden" name="fluxd_Watch_jobs" value="<tmpl_var name="fluxd_Watch_jobs">">
				</tr>
			</table>
		</div>
		<div id="uploadBottom"></div>
		<div id="uploadBottomEnd"></div>
		<div id="upload">
			<div id="uploadLast"></div>
			<div id="uploadFirst">
				<span class="upload">
					Rssad
					<tmpl_if name="fluxd_Rssad_state" value="0">
						<img height="10" src="themes/default/images/black.gif" title="Rssad not loaded.">
					</tmpl_if>
					<tmpl_if name="fluxd_Rssad_state" value="1">
						<img height="10" src="themes/default/images/green.gif" title="Rssad loaded.">
					</tmpl_if>
					<tmpl_if name="fluxd_Rssad_state" value="-1">
						<img height="10" src="themes/default/images/red.gif" title="Rssad error.">
					</tmpl_if>
				</span>
			</div>
		</div>
		<div class="uploadClass">
			<table id="settings">
				<tr>
					<td class="settingsTitle">
						Rssad enabled
					</td>
					<td class="settingsSetting" rowspan="2">
						<select name="fluxd_Rssad_enabled">
							<option value="1"
							<tmpl_if name="fluxd_Rssad_enabled" value="1">
								selected
							</tmpl_if>
							>True</option>
							<option value="0"
							<tmpl_if name="fluxd_Rssad_enabled" value="0">
								selected
							</tmpl_if>
							>False</option>
						</select>
					</td>
				</tr>
				<tr>
					<td class="settingsText">
						Specify whether or not to load the Rssad module.
					</td>
				</tr>
				<tr>
					<td class="settingsTitle">
						Rssad Interval
					</td>
					<td class="settingsSetting" rowspan="2">
						<input name="fluxd_Rssad_interval" type="Text" maxlength="10" value="<tmpl_var name="fluxd_Rssad_interval">" size="5">
					</td>
				</tr>
				<tr>
					<td class="settingsText">
						Interval in seconds to have run Rssad.
					</td>
				</tr>
				<tr>
					<td class="settingsTitle">
						Rssad Filters and Jobs
					</td>
					<td class="settingsSetting" rowspan="2">
						<a id="closeLink" href="admin.php?op=fluxdRssadSettings">Configure Filters and Jobs.</a>
					</td>
				</tr>
				<tr>
					<td class="settingsText">
						Configure the Rssad-Filters and Jobs.
					</td>
				</tr>
			</table>
		</div>
		<div id="uploadBottom"></div>
		<div id="uploadBottomEnd"></div>
		<div id="upload">
			<div id="uploadLast"></div>
			<div id="uploadFirst">
				<span class="upload">
					Fluxinet
					<tmpl_if name="fluxd_Fluxinet_state" value="0">
						<img height="10" src="themes/default/images/black.gif" title="Fluxinet not loaded.">
					</tmpl_if>
					<tmpl_if name="fluxd_Fluxinet_state" value="1">
						<img height="10" src="themes/default/images/green.gif" title="Fluxinet loaded.">
					</tmpl_if>
					<tmpl_if name="fluxd_Fluxinet_state" value="-1">
						<img height="10" src="themes/default/images/red.gif" title="Fluxinet error.">
					</tmpl_if>
				</span>
			</div>
		</div>
		<div class="uploadClass">
			<table id="settings">
				<tr>
					<td class="settingsTitle">
						Fluxinet enabled
					</td>
					<td class="settingsSetting" rowspan="2">
						<select name="fluxd_Fluxinet_enabled">
							<option value="1"
							<tmpl_if name="fluxd_Fluxinet_enabled" value="1">
								selected
							</tmpl_if>
							>True</option>
							<option value="0"
							<tmpl_if name="fluxd_Fluxinet_enabled" value="0">
								selected
							</tmpl_if>
							>False</option>
						</select>
					</td>
				</tr>
				<tr>
					<td class="settingsText">
						Specify whether or not to load the Fluxinet module.
					</td>
				</tr>
				<tr>
					<td class="settingsTitle">
						Fluxinet port
					</td>
					<td class="settingsSetting" rowspan="2">
						<input name="fluxd_Fluxinet_port" type="Text" maxlength="5" value="<tmpl_var name="fluxd_Fluxinet_port">" size="5">
					</td>
				</tr>
				<tr>
					<td class="settingsText">
						The port number to run the Fluxinet socket on.
					</td>
				</tr>
			</table>
		</div>
		<div id="uploadBottom"></div>
		<div id="uploadBottomEnd"></div>
		<div id="upload">
			<div id="uploadLast"></div>
			<div id="uploadFirst">
				<span class="upload">
					Maintenance
					<tmpl_if name="fluxd_Maintenance_state" value="0">
						<img height="10" src="themes/default/images/black.gif" title="Maintenance not loaded.">
					</tmpl_if>
					<tmpl_if name="fluxd_Maintenance_state" value="1">
						<img height="10" src="themes/default/images/green.gif" title="Maintenance loaded.">
					</tmpl_if>
					<tmpl_if name="fluxd_Maintenance_state" value="-1">
						<img height="10" src="themes/default/images/red.gif" title="Maintenance error.">
					</tmpl_if>
				</span>
			</div>
		</div>
		<div class="uploadClass">
			<table id="settings">
				<tr>
					<td class="settingsTitle">
						Maintenance enabled
					</td>
					<td class="settingsSetting" rowspan="2">
						<select name="fluxd_Maintenance_enabled">
							<option value="1"
							<tmpl_if name="fluxd_Maintenance_enabled" value="1">
								selected
							</tmpl_if>
							>True</option>
							<option value="0"
							<tmpl_if name="fluxd_Maintenance_enabled" value="0">
								selected
							</tmpl_if>
							>False</option>
						</select>
					</td>
				</tr>
				<tr>
					<td class="settingsText">
						Specify whether or not to load the Maintenance module.
					</td>
				</tr>
				<tr>
					<td class="settingsTitle">
						Maintenance Interval
					</td>
					<td class="settingsSetting" rowspan="2">
						<input name="fluxd_Maintenance_interval" type="Text" maxlength="10" value="<tmpl_var name="fluxd_Maintenance_interval">" size="5">
					</td>
				</tr>
				<tr>
					<td class="settingsText">
						Interval in seconds to have run Maintenance.
					</td>
				</tr>
				<tr>
					<td class="settingsTitle">
						Maintenance Transfer-Restart
					</td>
					<td class="settingsSetting" rowspan="2">
						<select name="fluxd_Maintenance_trestart">
							<option value="1"
							<tmpl_if name="fluxd_Maintenance_trestart" value="1">
								selected
							</tmpl_if>
							>True</option>
							<option value="0"
							<tmpl_if name="fluxd_Maintenance_trestart" value="0">
								selected
							</tmpl_if>
							>False</option>
						</select>
					</td>
				</tr>
				<tr>
					<td class="settingsText">
						Specify whether died Transfers should be restarted.
					</td>
				</tr>
			</table>
		</div>
		<div id="uploadBottom"></div>
		<div id="uploadBottomEnd"></div>
		<div id="upload">
			<div id="uploadLast"></div>
			<div id="uploadFirst">
				<span class="upload">
					Trigger
					<tmpl_if name="fluxd_Trigger_state" value="0">
						<img height="10" src="themes/default/images/black.gif" title="Trigger not loaded.">
					</tmpl_if>
					<tmpl_if name="fluxd_Trigger_state" value="1">
						<img height="10" src="themes/default/images/green.gif" title="Trigger loaded.">
					</tmpl_if>
					<tmpl_if name="fluxd_Trigger_state" value="-1">
						<img height="10" src="themes/default/images/red.gif" title="Trigger error.">
					</tmpl_if>
				</span>
			</div>
		</div>
		<div class="uploadClass">
			<table id="settings">
				<tr>
					<td class="settingsTitle">
						Trigger enabled
					</td>
					<td class="settingsSetting" rowspan="2">
						<select name="fluxd_Trigger_enabled">
							<option value="1"
							<tmpl_if name="fluxd_Trigger_enabled" value="1">
								selected
							</tmpl_if>
							>True</option>
							<option value="0"
							<tmpl_if name="fluxd_Trigger_enabled" value="0">
								selected
							</tmpl_if>
							>False</option>
						</select>
					</td>
				</tr>
				<tr>
					<td class="settingsText">
						Specify whether or not to load the Trigger module.
					</td>
				</tr>
				<tr>
					<td class="settingsTitle">
						Trigger Interval
					</td>
					<td class="settingsSetting" rowspan="2">
						<input name="fluxd_Trigger_interval" type="Text" maxlength="10" value="<tmpl_var name="fluxd_Trigger_interval">" size="5">
					</td>
				</tr>
				<tr>
					<td class="settingsText">
						Interval in seconds to have run Trigger.
					</td>
				</tr>
				<tr>
					<td class="settingsTitle">
					</td>
					<td class="settingsSetting">
						<input type="Submit" value="Update Settings">
					</td>
				</tr>
			</table>
		</div>
		<div id="uploadBottom"></div>
		<div id="uploadBottomEnd"></div>
	</form>
	<tmpl_include name="inc.subfoot.tmpl">
</div>
<div id="stats">
	<script language="JavaScript">
		function SuperAdmin(name_file) {
			window.open (name_file,"_blank","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=800,height=600")
		}
	</script>
	<div id="bandwidthTitle">
		<a class="mainMenu" href="javascript:SuperAdmin('superadmin.php?f=1')">Log</a>
	</div>
	<div id="drivespaceTitle">
		<a class="mainMenu" href="javascript:SuperAdmin('superadmin.php?f=2')">Error Log</a>
	</div>
	<div id="drivespaceTitle">
		<a class="mainMenu" href="javascript:SuperAdmin('superadmin.php?f=3')">ps</a>
	</div>
	<tmpl_if name="fluxdRunning">
		<div id="drivespaceTitle">
			<a class="mainMenu" href="javascript:SuperAdmin('superadmin.php?f=4')">Status</a>
		</div>
	<tmpl_else>
		<div id="drivespaceTitle">
			<a class="mainMenu" href="javascript:SuperAdmin('superadmin.php?f=5')">Check</a>
		</div>
		<div id="drivespaceTitle">
			<a class="mainMenu" href="javascript:SuperAdmin('superadmin.php?f=6')">db-Debug</a>
		</div>
		<div id="drivespaceTitle">
			<a class="mainMenu" href="javascript:SuperAdmin('superadmin.php?f=9')">Version</a>
		</div>
	</tmpl_if>
	<div id="drivespaceTitle">
		<a class="mainMenu" href="">
			<tmpl_if name="fluxdRunning">
				fluxd Running
			<tmpl_else>
				fluxd Off
			</tmpl_if>
		</a>
	</div>
	<tmpl_if name="fluxdRunning">
		<div id="statsDrivespace">
			<div class="serverStatsBottom">
				<span class="serverStats">(pid: <tmpl_var name="fluxdPid">)</span>
			</div>
		</div>
	</tmpl_if>
</div>
</body>
</html>