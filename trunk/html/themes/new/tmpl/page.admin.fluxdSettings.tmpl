<tmpl_include name="inc.head.tmpl">
<tmpl_include name="inc.subhead.tmpl">
<tmpl_include name="inc.adminmenu.tmpl">
<tmpl_if name="message">
	<table cellpadding="5" cellspacing="0" border="0" width="100%">
		<tr>
			<td align="center" bgcolor="#A2BED4">
				<strong><tmpl_var name="message"></strong>
			</td>
		</tr>
	</table>
</tmpl_if>
<script src="js/adminSettings.js" type="text/javascript"></script>
<script src="js/fluxdSettings.js" type="text/javascript"></script>
<div align="center">
	<a name="fluxd" id="fluxd"></a>
	<table width="100%" border=1 bordercolor="<tmpl_var name="table_admin_border">" cellpadding="2" cellspacing="0" bgcolor="<tmpl_var name="table_data_bg">">
		<tr>
			<td bgcolor="#A2BED4" background="themes/default/images/bar.gif">
				<font class="title">
					<tmpl_if name="fluxdRunning">
						&nbsp;&nbsp;<img src="themes/default/images/green.gif" align="absmiddle" align="absmiddle"> fluxd Running (pid: <tmpl_var name="fluxdPid">)
					<tmpl_else>
						&nbsp;&nbsp;<img src="themes/default/images/black.gif" align="absmiddle"> fluxd Off
					</tmpl_if>
				</font>
			</td>
		</tr>
		<tr>
			<td align="center">
				<div align="center">
					<table cellpadding="5" cellspacing="0" border="0" width="100%">
							<tmpl_if name="fluxdSupported" value="1">
								<form name="controlForm" action="admin.php?op=controlFluxd" method="post">
									<tmpl_if name="fluxdRunning">
										<input type="Hidden" name="a" value="stop">
										<tr>
											<td align="center" colspan="2">
												<input type="Submit" value="Stop fluxd">
												<br><br>
											</td>
										</tr>
									<tmpl_else>
										<input type="Hidden" name="a" value="start">
										<tr>
											<td align="left" width="350" valign="top"><strong>Start fluxd:</strong><br></td>
										</tr>
										<tr>
											<td align="center" colspan="2">
												<input type="Submit" value="Start fluxd">
												<br><br>
											</td>
										</tr>
									</tmpl_if>
								</form>
							<tmpl_else>
								<tr>
									<td align="center" colspan="2">
										<strong><font color="red">fluxd not supported</font><strong>
										<br>
										PHP does not have support for <em>sockets</em>, fluxd cannot work.
										<br>
									</td>
								</tr>
							</tmpl_if>
							<tr>
								<td align="center" colspan="2">
									<table width="100%" border="2" bgcolor="#829FB5" bordercolor="#829FB5" cellpadding="2" cellspacing="0">
										<tr>
											<td colspan="6">
												<div align="center">
													<tmpl_var name="SuperAdminLink1">
													|<tmpl_var name="SuperAdminLink2">
													|<tmpl_var name="SuperAdminLink3">
													<tmpl_if name="fluxdRunning">
														 |<tmpl_var name="SuperAdminLink4">
													<tmpl_else>
														 |<tmpl_var name="SuperAdminLink5">
														 |<tmpl_var name="SuperAdminLink6">
														 |<tmpl_var name="SuperAdminLink9">
													</tmpl_if>
												</div>
											</td>
										</tr>
									</table>
									<br>
								</td>
							</tr>
							<form name="theForm" action="admin.php?op=updateFluxdSettings" method="post" onsubmit="return validateSettings('fluxd')">
								<tr>
									<td colspan="2" align="center" bgcolor="#A2BED4">
										<strong>Core</strong>
									</td>
								</tr>
								<tr>
									<td align="left" width="350" valign="top"><strong>Database-Mode</strong><br>
									Specify the Mode to get data from the Database.
									</td>
									<td valign="top">
										<select name="fluxd_dbmode">
											<option value="php"
											<tmpl_if name="fluxd_dbmode" value="php">
												selected
											</tmpl_if>
											>PHP + fluxcli.php</option>
											<option value="dbi"
											<tmpl_if name="fluxd_dbmode" value="dbi">
												selected
											</tmpl_if>
											>Perl + DBI/DBD</option>
										</select>
									</td>
								</tr>
								<tr>
									<td align="left" width="350" valign="top"><strong>Loglevel</strong><br>
									Specify the level of logging (default is 0):
									</td>
									<td valign="top">
										<input name="fluxd_loglevel" type="Text" maxlength="2" value="<tmpl_var name="fluxd_loglevel">" size="5">
									</td>
								</tr>
								<tr><td colspan="2" align="center"><br></td></tr>
								<tr>
									<td colspan="2" align="center" bgcolor="#A2BED4">
										<strong>Modules</strong>
									</td>
								</tr>
								<tr><td colspan="2" align="center"><br></td></tr>
								<tr>
									<td colspan="2" align="center" bgcolor="#A2BED4">
										<strong>Qmgr</strong>&nbsp;
										<tmpl_if name="fluxd_Qmgr_state" value="0">
											<img src="themes/default/images/black.gif" title="Qmgr not loaded.">
										</tmpl_if>
										<tmpl_if name="fluxd_Qmgr_state" value="1">
											<img src="themes/default/images/green.gif" title="Qmgr loaded.">
										</tmpl_if>
										<tmpl_if name="fluxd_Qmgr_state" value="-1">
											<img src="themes/default/images/red.gif" title="Qmgr error.">
										</tmpl_if>
									</td>
								</tr>
								<tr>
									<td align="left" width="350" valign="top"><strong>Qmgr enabled</strong><br>
									Specify whether or not to load the Qmgr module.
									</td>
									<td valign="top">
										<select name="fluxd_Qmgr_enabled">
											<option value="1"
											<tmpl_if name="fluxd_Qmgr_enabled" value="1">
												selected
											</tmpl_if>
											>True</option>
											<option value="0"
											<tmpl_if name="fluxd_Qmgr_enabled" value="0">
												selected
											</tmpl_if>
											>False</option>
										</select>
									</td>
								</tr>
								<tr>
									<td align="left" width="350" valign="top"><strong>Qmgr Interval</strong><br>
										Interval in seconds to have run Qmgr.
									</td>
									<td valign="top">
										<input name="fluxd_Qmgr_interval" type="Text" maxlength="10" value="<tmpl_var name="fluxd_Qmgr_interval">" size="5">
									</td>
								</tr>
								<tr>
									<td align="left" width="350" valign="top"><strong>Limit Transfer Global</strong><br>
									Specify the maximum number of transfers the server will allow to run at one time (admins may override this):
									</td>
									<td valign="top">
										<input name="fluxd_Qmgr_maxTotalTransfers" type="Text" maxlength="5" value="<tmpl_var name="fluxd_Qmgr_maxTotalTransfers">" size="5">
									</td>
								</tr>
								<tr>
									<td align="left" width="350" valign="top"><strong>Limit Transfer Per User</strong><br>
									Specify the maximum number of transfers a single user may run at one time:
									</td>
									<td valign="top">
										<input name="fluxd_Qmgr_maxUserTransfers" type="Text" maxlength="5" value="<tmpl_var name="fluxd_Qmgr_maxUserTransfers">" size="5">
									</td>
								</tr>
								<tr>
									<td colspan="2" align="center" bgcolor="#A2BED4">
										<strong>Watch</strong>&nbsp;
										<tmpl_if name="fluxd_Watch_state" value="0">
											<img src="themes/default/images/black.gif" title="Watch not loaded.">
										</tmpl_if>
										<tmpl_if name="fluxd_Watch_state" value="1">
											<img src="themes/default/images/green.gif" title="Watch loaded.">
										</tmpl_if>
										<tmpl_if name="fluxd_Watch_state" value="-1">
											<img src="themes/default/images/red.gif" title="Watch error.">
										</tmpl_if>
									</td>
								</tr>
								<tr>
									<td align="left" width="350" valign="top"><strong>Watch enabled</strong><br>
									Specify whether or not to load the Watch module.
									</td>
									<td valign="top">
										<select name="fluxd_Watch_enabled">
											<option value="1"
											<tmpl_if name="fluxd_Watch_enabled" value="1">
												selected
											</tmpl_if>
											>True</option>
											<option value="0"
											<tmpl_if name="fluxd_Watch_enabled" value="0">
												selected
											</tmpl_if>
											>False</option>
										</select>
									</td>
								</tr>
								<tr>
									<td align="left" width="350" valign="top"><strong>Watch Interval</strong><br>
										Interval in seconds to have run Watch.
									</td>
									<td valign="top">
										<input name="fluxd_Watch_interval" type="Text" maxlength="10" value="<tmpl_var name="fluxd_Watch_interval">" size="5">
									</td>
								</tr>
								<tr>
									<td align="left" width="350" valign="top"><strong>Watch Jobs</strong><br>
										Configure the Watch-Jobs.
									</td>
									<td valign="top">
										<table>
											<tr>
												<td valign="top" align="left">Jobs :</td>
												<td valign="top" align="left">
													<select name="watch_jobs" size="3">
														<tmpl_if name="fluxd_Watch_jobs_list">
															<tmpl_loop name="fluxd_Watch_jobs_list">
																<option value="<tmpl_var name="user">:<tmpl_var name="dir">"><tmpl_var name="user">:<tmpl_var name="dir"></option>
															</tmpl_loop>
														</tmpl_if>
													</select>
													<input type="button" name="remButton" value="remove" onclick="removeWatchEntry()">
												</td>
											</tr>
											<tr>
												<td valign="top" align="left" colspan="2">New Job :</td>
											</tr>
											<tr>
												<td valign="top" align="left">User :</td>
												<td valign="top" align="left">
													<select name="watch_user">
														<tmpl_loop name="watch_user">
															<option value="<tmpl_var name="user">"><tmpl_var name="user"></option>
														</tmpl_loop>
													</select>
													<input type="button" name="addButton" value="add" onclick="addWatchEntry()" size="30">
												</td>
											</tr>
											<tr>
												<td valign="top" align="left">Dir :</td>
												<td valign="top" align="left">
													<input type="text" name="watch_dir" size="40">
												</td>
											</tr>
											<tr>
												<td valign="top" align="left" colspan="2">
													Check/Create dirs <input type="checkbox" name="checkdir" value="true" checked>
												</td>
											</tr>
										</table>
										<input type="hidden" name="fluxd_Watch_jobs" value="<tmpl_var name="fluxd_Watch_jobs">">
									</td>
								</tr>
								<tr>
									<td colspan="2" align="center" bgcolor="#A2BED4">
										<strong>Rssad</strong>&nbsp;
										<tmpl_if name="fluxd_Rssad_state" value="0">
											<img src="themes/default/images/black.gif" title="Rssad not loaded.">
										</tmpl_if>
										<tmpl_if name="fluxd_Rssad_state" value="1">
											<img src="themes/default/images/green.gif" title="Rssad loaded.">
										</tmpl_if>
										<tmpl_if name="fluxd_Rssad_state" value="-1">
											<img src="themes/default/images/red.gif" title="Rssad error.">
										</tmpl_if>
									</td>
								</tr>
								<tr>
									<td align="left" width="350" valign="top"><strong>Rssad enabled</strong><br>
									Specify whether or not to load the Rssad module.
									</td>
									<td valign="top">
										<select name="fluxd_Rssad_enabled">
											<option value="1"
											<tmpl_if name="fluxd_Rssad_enabled" value="1">
												selected
											</tmpl_if>
											>True</option>
											<option value="0"
											<tmpl_if name="fluxd_Rssad_enabled" value="0">
												selected
											</tmpl_if>
											>False</option>
										</select>
									</td>
								</tr>
								<tr>
									<td align="left" width="350" valign="top"><strong>Rssad Interval</strong><br>
										Interval in seconds to have run Rssad.
									</td>
									<td valign="top">
										<input name="fluxd_Rssad_interval" type="Text" maxlength="10" value="<tmpl_var name="fluxd_Rssad_interval">" size="5">
									</td>
								</tr>
								<tr>
									<td align="left" width="350" valign="top"><strong>Rssad Filters and Jobs</strong><br>
										Configure the Rssad-Filters and Jobs.
									</td>
									<td valign="top">
										<a href="admin.php?op=fluxdRssadSettings">Configure Filters and Jobs.</a>
									</td>
								</tr>
								<tr>
									<td colspan="2" align="center" bgcolor="#A2BED4">
										<strong>Fluxinet</strong>&nbsp;
										<tmpl_if name="fluxd_Fluxinet_state" value="0">
											<img src="themes/default/images/black.gif" title="Fluxinet not loaded.">
										</tmpl_if>
										<tmpl_if name="fluxd_Fluxinet_state" value="1">
											<img src="themes/default/images/green.gif" title="Fluxinet loaded.">
										</tmpl_if>
										<tmpl_if name="fluxd_Fluxinet_state" value="-1">
											<img src="themes/default/images/red.gif" title="Fluxinet error.">
										</tmpl_if>
									</td>
								</tr>
								<tr>
									<td align="left" width="350" valign="top"><strong>Fluxinet enabled</strong><br>
									Specify whether or not to load the Fluxinet module.
									</td>
									<td valign="top">
										<select name="fluxd_Fluxinet_enabled">
											<option value="1"
											<tmpl_if name="fluxd_Fluxinet_enabled" value="1">
												selected
											</tmpl_if>
											>True</option>
											<option value="0"
											<tmpl_if name="fluxd_Fluxinet_enabled" value="0">
												selected
											</tmpl_if>
											>False</option>
										</select>
									</td>
								</tr>
								<tr>
									<td align="left" width="250" valign="top"><strong>Fluxinet port</strong><br>
										the port number to run the Fluxinet socket on:
									</td>
									<td valign="top">
										<input name="fluxd_Fluxinet_port" type="Text" maxlength="5" value="<tmpl_var name="fluxd_Fluxinet_port">" size="5">
									</td>
								</tr>
								<tr>
									<td colspan="2" align="center" bgcolor="<tmpl_var name="table_header_bg">">
										<strong>Maintenance</strong>&nbsp;
										<tmpl_if name="fluxd_Maintenance_state" value="0">
											<img src="themes/tf_standard_themes/images/black.gif" title="Maintenance not loaded.">
										</tmpl_if>
										<tmpl_if name="fluxd_Maintenance_state" value="1">
											<img src="themes/tf_standard_themes/images/green.gif" title="Maintenance loaded.">
										</tmpl_if>
										<tmpl_if name="fluxd_Maintenance_state" value="-1">
											<img src="themes/tf_standard_themes/images/red.gif" title="Maintenance error.">
										</tmpl_if>
									</td>
								</tr>
								<tr>
									<td align="left" width="350" valign="top"><strong>Maintenance enabled</strong><br>
									Specify whether or not to load the Maintenance module.
									</td>
									<td valign="top">
										<select name="fluxd_Maintenance_enabled">
											<option value="1"
											<tmpl_if name="fluxd_Maintenance_enabled" value="1">
												selected
											</tmpl_if>
											>True</option>
											<option value="0"
											<tmpl_if name="fluxd_Maintenance_enabled" value="0">
												selected
											</tmpl_if>
											>False</option>
										</select>
									</td>
								</tr>
								<tr>
									<td align="left" width="350" valign="top"><strong>Maintenance Interval</strong><br>
										Interval in seconds to have run Maintenance.
									</td>
									<td valign="top">
										<input name="fluxd_Maintenance_interval" type="Text" maxlength="10" value="<tmpl_var name="fluxd_Maintenance_interval">" size="5">
									</td>
								</tr>
								<tr>
									<td align="left" width="350" valign="top"><strong>Maintenance Transfer-Restart</strong><br>
									Specify whether died Transfers should be restarted.
									</td>
									<td valign="top">
										<select name="fluxd_Maintenance_trestart">
											<option value="1"
											<tmpl_if name="fluxd_Maintenance_trestart" value="1">
												selected
											</tmpl_if>
											>True</option>
											<option value="0"
											<tmpl_if name="fluxd_Maintenance_trestart" value="0">
												selected
											</tmpl_if>
											>False</option>
										</select>
									</td>
								</tr>
								<tr>
									<td colspan="2" align="center" bgcolor="<tmpl_var name="table_header_bg">">
										<strong>Trigger</strong>&nbsp;
										<tmpl_if name="fluxd_Trigger_state" value="0">
											<img src="themes/tf_standard_themes/images/black.gif" title="Trigger not loaded.">
										</tmpl_if>
										<tmpl_if name="fluxd_Trigger_state" value="1">
											<img src="themes/tf_standard_themes/images/green.gif" title="Trigger loaded.">
										</tmpl_if>
										<tmpl_if name="fluxd_Trigger_state" value="-1">
											<img src="themes/tf_standard_themes/images/red.gif" title="Trigger error.">
										</tmpl_if>
									</td>
								</tr>
								<tr><td colspan="2"><u>Note</u> : Trigger module does nothing.</td></tr>
								<tr>
									<td align="left" width="350" valign="top"><strong>Trigger enabled</strong><br>
									Specify whether or not to load the Trigger module.
									</td>
									<td valign="top">
										<select name="fluxd_Trigger_enabled">
											<option value="1"
											<tmpl_if name="fluxd_Trigger_enabled" value="1">
												selected
											</tmpl_if>
											>True</option>
											<option value="0"
											<tmpl_if name="fluxd_Trigger_enabled" value="0">
												selected
											</tmpl_if>
											>False</option>
										</select>
									</td>
								</tr>
								<tr>
									<td align="left" width="350" valign="top"><strong>Trigger Interval</strong><br>
										Interval in seconds to have run Trigger.
									</td>
									<td valign="top">
										<input name="fluxd_Trigger_interval" type="Text" maxlength="10" value="<tmpl_var name="fluxd_Trigger_interval">" size="5">
									</td>
								</tr>
								<tr><td colspan="2"><hr noshade></td></tr>
								<tr>
									<td align="center" colspan="2">
									<input type="Submit" value="Update Settings">
									</td>
								</tr>
							</form>
						</table>
					</div>
					<br>
				</td>
			</tr>
		</table>
	</div>
</div>
<tmpl_include name="inc.subfoot.tmpl">